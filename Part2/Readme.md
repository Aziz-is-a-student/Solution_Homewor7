# Airport Tower Simulator - Mediator Pattern

## Описание

Этот проект представляет собой симулятор управления воздушным движением, использующий паттерн **Mediator** для координации самолетов, садящихся, взлетающих или таксующих на одной полосе. Все самолеты взаимодействуют только через **Control Tower**, чтобы избежать хаоса в случае прямого общения между ними.

## Задача

Целью системы является моделирование работы аэропорта, где самолеты могут запрашивать посадку или взлет через контрольную вышку (Control Tower). Особое внимание уделяется экстренным ситуациям, например, когда самолет объявляет **MAYDAY**. В таких случаях экстренный самолет получает приоритетную посадку.

### Ключевые особенности:
- Использование паттерна **Mediator** для управления взаимодействием между самолетами.
- Поддержка экстренных ситуаций, когда самолет с MAYDAY получает приоритет.
- Реализация двух очередей: одна для посадки, другая для взлета.
- Использование **ScheduledExecutorService** для симуляции реального времени.

## Структура проекта

Проект состоит из нескольких классов, которые реализуют паттерн **Mediator** и моделируют поведение различных типов самолетов и контрольной вышки:

- **TowerMediator**: интерфейс для взаимодействия с башней управления.
- **ControlTower**: конкретная реализация медиатора, которая управляет очередями и экстренными посадками.
- **Aircraft**: абстрактный класс для всех типов самолетов (пассажирские, грузовые, вертолеты).
- **PassengerPlane, CargoPlane, Helicopter**: конкретные реализации самолетов.
- **EmergencyAircraft**: класс для экстренных самолетов, которые могут объявить MAYDAY.
- **AirportSimulation**: класс для симуляции работы аэропорта с использованием **ScheduledExecutorService** для запуска запросов.

## Паттерн Mediator

Паттерн **Mediator** используется для упрощения взаимодействий между объектами. Вместо того, чтобы все самолеты взаимодействовали напрямую друг с другом, они отправляют все сообщения через объект **ControlTower**, который управляет очередями и координирует действия.

### Преимущества Mediator:
- Упрощение взаимодействий между объектами, так как они не общаются напрямую.
- Централизованная логика управления, что позволяет легко изменять и расширять функциональность.

### Недостатки Mediator:
- Потенциальная перегрузка медиатора, если логика взаимодействия становится слишком сложной.

## Экстренные ситуации

Когда самолет объявляет **MAYDAY**, он немедленно получает приоритет для посадки, независимо от того, что происходит на полосе. В процессе экстренной посадки все другие самолеты должны ждать.

Для обработки экстренных ситуаций был добавлен метод **emergencyLanding()** в класс **ControlTower**, который очищает очереди посадки и предоставляет экстренному самолету немедленную посадку.

## Симуляция

Симуляция запускается с использованием **ScheduledExecutorService**, который создает случайные самолеты (пассажирские, грузовые, вертолеты и экстренные) и отправляет запросы на посадку или взлет каждую секунду. В случае экстренной ситуации (MAYDAY) самолет немедленно получает приоритет.

## Запуск симуляции

Для запуска симуляции выполните следующий код:

```java
ScheduledExecutorService executor = Executors.newScheduledThreadPool(1);

Runnable simulationTask = () -> {
    Aircraft aircraft = generateRandomAircraft();  // Генерация случайного самолета
    if (aircraft instanceof EmergencyAircraft) {
        tower.broadcast("MAYDAY! " + aircraft.id, aircraft);
        tower.emergencyLanding(aircraft);  // Экстренная посадка
    } else {
        tower.broadcast(aircraft.id + " запрашивает разрешение на посадку.", aircraft);
        boolean clearedForLanding = tower.requestRunway(aircraft);

        if (clearedForLanding) {
            tower.processLandingQueue();
        } else {
            tower.broadcast(aircraft.id + " добавлен в очередь на посадку.", aircraft);
        }
    }
};

executor.scheduleAtFixedRate(simulationTask, 0, 1, TimeUnit.SECONDS);
